{% extends 'dashboard.html' %}
{% block content %}
<div class="flex flex-1 items-center justify-center w-full h-full min-h-0">
    <div class="max-w-7xl w-full bg-white bg-opacity-95 rounded-2xl shadow-2xl p-16 flex flex-col items-center h-full justify-center">
        <div class="mb-6">
            <div class="w-24 h-24 rounded-full bg-gradient-to-br from-blue-300 to-blue-500 flex items-center justify-center shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-14 w-14 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
            </div>
        </div>
        <h2 class="text-4xl font-extrabold text-blue-700 mb-2">Mark Attendance</h2>
        <p class="text-gray-500 mb-8 text-center text-lg">Upload your QR code image to mark your attendance. Attendance can only be marked during the allowed time slots.</p>
        <div class="mb-8 text-gray-700 w-full flex flex-col md:flex-row gap-8 justify-center items-center">
            <div class="bg-blue-50 rounded-lg px-8 py-5 flex flex-col items-center w-full md:w-auto">
                <span class="font-semibold text-blue-700 text-lg">Morning Slot</span>
                <span class="text-base">8:00 AM to 10:00 AM</span>
            </div>
            <div class="bg-blue-50 rounded-lg px-8 py-5 flex flex-col items-center w-full md:w-auto">
                <span class="font-semibold text-blue-700 text-lg">Afternoon Slot</span>
                <span class="text-base">12:30 PM to 2:30 PM</span>
            </div>
        </div>
        {% if message %}
            <div class="mb-4 text-center {% if success %}text-green-600{% else %}text-red-600{% endif %} font-semibold text-lg">{{ message }}</div>
        {% endif %}
        {% if slot_enabled %}
        <form method="POST" enctype="multipart/form-data" class="w-full flex flex-col items-center">
            <label class="w-full flex flex-col items-center px-4 py-12 bg-blue-50 text-blue-700 rounded-lg shadow-md tracking-wide uppercase border border-blue-200 cursor-pointer hover:bg-blue-100 transition mb-8">
                <svg class="w-12 h-12 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4a1 1 0 011-1h8a1 1 0 011 1v12m-4 4h-4a1 1 0 01-1-1v-1a1 1 0 011-1h4a1 1 0 011 1v1a1 1 0 01-1 1z"></path></svg>
                <span class="text-lg leading-normal">Select QR Code Image</span>
                <input type="file" name="qr_image" accept="image/*" required class="hidden" title="Upload QR Code Image" />
            </label>
            <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-lg font-semibold shadow hover:bg-blue-700 transition text-xl">Mark Attendance</button>
        </form>
        {% else %}
        <div class="text-center text-yellow-600 font-semibold mt-4 text-lg">Attendance can only be marked during the allowed time slots.</div>
        {% endif %}
    </div>
</div>
{% endblock %} 